(function(e){function t(t){for(var n,a,i=t[0],s=t[1],u=t[2],l=0,f=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);p&&p(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(c.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},o={app:0},c=[];function i(e){return s.p+"js/"+({about:"about",admin:"admin",account:"account"}[e]||e)+"."+{about:"dc3c6498",admin:"144bd16f","chunk-94248c9e":"fc023378",account:"aaf4ec8f","chunk-b19810a0":"0256d228"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={"chunk-94248c9e":1,account:1,"chunk-b19810a0":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({about:"about",admin:"admin",account:"account"}[e]||e)+"."+{about:"31d6cfe0",admin:"31d6cfe0","chunk-94248c9e":"6f02021a",account:"e00bb571","chunk-b19810a0":"42b6dca3"}[e]+".css",o=s.p+n,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===o))return t()}var f=document.getElementsByTagName("style");for(i=0;i<f.length;i++){u=f[i],l=u.getAttribute("data-href");if(l===n||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=n,delete a[e],p.parentNode.removeChild(p),r(c)},p.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var c=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e);var f=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",f.name="ChunkLoadError",f.type=n,f.request=a,r[1](f)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var f=0;f<u.length;f++)t(u[f]);var p=l;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"41cb":function(e,t,r){"use strict";var n=r("2b0e"),a=r("8c4f"),o=r("4360"),c=function(){var e=this,t=e._self._c;return t("HelloWorld")},i=[],s=r("a523"),u=r("ce7e6"),l=function(){var e=this,t=e._self._c;return t(s["a"],{staticClass:"body-2 ma-4 pa-4",attrs:{"justify-center":"","text-xs-center":""}},[t("div",[t("h1",{staticClass:"display-2 font-weight-bold mb-3"},[e._v("GoBase Demo Application")]),t("p",{staticClass:"subheading font-weight-regular"},[t("a",{attrs:{href:"https://github.com/dhax/go-base",target:"_blank",rel:"noopener"}},[e._v("Check out on GitHub")])])]),t(u["a"]),t("div",{staticClass:"ma-4 pa-4"},[t("h5",{staticClass:"headline"},[e._v("What's this?")]),t("p",[e._v("A Go REST API and Vue.js client demo using a passwordless authentication flow with Json Web Token (JWT)")]),t("p",[e._v("A registered email address requests and then receives a temporary token to login.")]),t("p",[e._v("On successful login an access and a refresh JWT are saved to this client.")])]),t(u["a"]),t("div",{staticClass:"ma-4 pa-4"},[t("h5",{staticClass:"headline"},[e._v("Available Logins")]),t("p",[e._v("For these two emails grab the login token from console output.")]),t("p",[e._v("admin@boot.io (admin panel)")]),t("p",[e._v("user@boot.io (own account)")]),t("p",[e._v("Other registered addresses will recieve an email with login token.")])]),t(u["a"]),t("div",{staticClass:"ma-4 pa-4"},[t("p",[e._v("Database is reset every 24 hours in this demo.")])])],1)},f=[],p=r("2877"),h={},d=Object(p["a"])(h,l,f,!1,null,null,null),m=d.exports,g={components:{HelloWorld:m}},b=g,v=Object(p["a"])(b,c,i,!1,null,null,null),k=v.exports,O=r("0798"),_=r("8336"),w=r("b0af"),y=r("99d9"),j=r("0e8f"),E=r("4bd4"),T=r("132d"),R=r("a722"),x=r("0789"),C=r("9910"),S=r("2677"),P=r("71d9"),U=r("2a7f"),A=r("3a2f"),H=function(){var e=this,t=e._self._c;return t(s["a"],{attrs:{fluid:"","fill-height":""}},[t(R["a"],{attrs:{"align-center":"","justify-center":""}},[t(j["a"],{attrs:{xs12:"",sm8:"",md4:""}},[t(O["a"],{staticClass:"elevation-12 text-uppercase",attrs:{value:e.alert.msg,type:e.alert.type,dismissible:"",transition:"scale-transition"}},[e._v(e._s(e.alert.msg))]),t(w["a"],{staticClass:"elevation-12"},[t(P["a"],{staticClass:"elevation-4"},[t(U["b"],[e._v("Login")]),t(C["a"]),t(C["a"]),t(A["a"],{attrs:{top:"","nudge-top":""}},[t(_["a"],{attrs:{slot:"activator",icon:""},on:{click:function(t){e.help=!e.help}},slot:"activator"},[t(T["a"],[e._v("help")])],1),t("span",[e._v("Help")])],1)],1),t(x["e"],[t(w["a"],{directives:[{name:"show",rawName:"v-show",value:e.help,expression:"help"}],attrs:{dark:""}},[t(y["b"],[t("p",{staticClass:"body-2 text-xs-center"},[e._v("Submit your email to receive a login token.")]),t("p",{staticClass:"body-2 text-xs-center"},[e._v("Enter received token here to login.")])])],1)],1),t(y["b"],[t(E["a"],{ref:"loginForm",on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(S["a"],{attrs:{name:"input",rules:e.inputRules,label:"Email or Token",required:"",autofocus:""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)],1),t(y["a"],[t(C["a"]),t(_["a"],{staticClass:"elevation-12",attrs:{name:"submit",color:"primary",disabled:!e.valid||e.authenticating,loading:e.authenticating},on:{click:e.submit}},[e._v("Submit")])],1)],1)],1)],1)],1)},I=[],D=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),q=r("2f62"),L=r("63e0");function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){Object(D["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={name:"login",data:function(){var e=this;return{help:!1,valid:!1,input:"",inputRules:[function(e){return!!e||"required"},function(){return e.isEmail||e.isToken||""}]}},computed:B(B({},Object(q["c"])(["authenticating","authenticationStatus","authenticationError","authenticationErrorCode"])),{},{isEmail:function(){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.input)},isToken:function(){return this.input&&8==this.input.length&&!/@/.test(this.input)},alert:function(){return{msg:this.authenticationError||this.authenticationStatus,type:this.authenticationError?"error":"info"}}}),methods:B(B({},Object(q["b"])([L["h"],L["c"]])),{},{submit:function(){console.log("send token"),this.$refs.loginForm.validate()&&(this.isEmail&&this.AUTH_TOKEN_REQUEST(this.input),this.isToken&&this.AUTH_LOGIN_REQUEST(this.input),this.clearForm())},clearForm:function(){this.$refs.loginForm.reset()}}),mounted:function(){var e=this,t=this.$route.params.token;t&&(this.input=t,setTimeout((function(){e.submit()}),300))}},F=M,G=(r("b9c1"),Object(p["a"])(F,H,I,!1,null,null,null)),Q=G.exports;n["a"].use(a["a"]);var J=function(e,t,r){o["a"].getters.loggedIn?r(!1):r()},W=function(e,t,r){o["a"].getters["hasRole"]("admin")?r():r(!1)},$=new a["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:k,meta:{public:!0}},{path:"/about",name:"about",meta:{public:!0},component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/login/:token",component:Q,meta:{public:!0}},{path:"/login",name:"login",component:Q,meta:{public:!0},beforeEnter:J},{path:"/account",name:"account",component:function(){return Promise.all([r.e("chunk-94248c9e"),r.e("account")]).then(r.bind(null,"77be"))}},{path:"/admin",beforeEnter:W,component:function(){return r.e("admin").then(r.bind(null,"3530"))},children:[{path:"accounts",component:function(){return Promise.all([r.e("chunk-94248c9e"),r.e("chunk-b19810a0")]).then(r.bind(null,"8c88"))}}]}]});$.beforeEach((function(e,t,r){var n=e.matched.some((function(e){return e.meta.public})),a=o["a"].getters.loggedIn;if(!n&&!a)return r({path:"/login",query:{redirect:e.fullPath}});r()}));t["a"]=$},4360:function(e,t,r){"use strict";var n=r("2b0e"),a=r("2f62"),o=r("bd86"),c=(r("96cf"),r("3b8d")),i=(r("2397"),r("7f7f"),r("b0b4")),s=r("d225"),u=r("4e2b"),l=r("308d"),f=r("6bb5"),p=r("f28b"),h=r("c5fa");function d(e){var t=m();return function(){var r,n=Object(f["a"])(e);if(t){var a=Object(f["a"])(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l["a"])(this,r)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g,b=function(e){Object(u["a"])(r,e);var t=d(r);function r(e,n,a){var o;return Object(s["a"])(this,r),o=t.call(this,n),o.name=o.constructor.name,o.message=n,o.errorCode=e,o.errorFields=a,o}return Object(i["a"])(r)}(Object(p["a"])(Error)),v={getProfile:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h["a"].get("/api/profile");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e["catch"](0),new b(e.t0.response.status,e.t0.response.data.error,e.t0.response.data.errors);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},k=r("63e0"),O={status:"",profile:{}},_={getProfile:function(e){return e.profile},isProfileLoaded:function(e){return!!e.profile}},w=Object(o["a"])({},k["k"],function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,console.log("dispatch USER REQUEST"),r(k["k"]),e.prev=3,e.next=6,v.getProfile();case 6:n=e.sent,r(k["l"],n),e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](3),e.t0 instanceof b&&r(k["j"],{errorCode:e.t0.errorCode,errorMessage:e.t0.message}),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()),y=(g={},Object(o["a"])(g,k["k"],(function(e){console.log("USER REQUEST"),e.status="loading"})),Object(o["a"])(g,k["l"],(function(e,t){console.log("USER_SUCCESS"),e.profile=t})),Object(o["a"])(g,k["j"],(function(e,t){var r=t.errorCode,n=t.errorMessage;console.log("USER_ERROR"),e.errorCode=r,e.errorMessage=n})),g),j={state:O,getters:_,actions:w,mutations:y},E=(r("a481"),r("28a5"),r("673e"),r("6762"),r("2fdb"),r("f6ed"));function T(e){var t=R();return function(){var r,n=Object(f["a"])(e);if(t){var a=Object(f["a"])(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(l["a"])(this,r)}}function R(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var x,C,S=function(e){Object(u["a"])(r,e);var t=T(r);function r(e,n){var a;return Object(s["a"])(this,r),a=t.call(this,n),a.name=a.constructor.name,a.message=n,a.errorCode=e,a}return Object(i["a"])(r)}(Object(p["a"])(Error)),P={requestEmailToken:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"post",url:"auth/login",data:{grant_type:"email",email:t}},e.prev=1,e.next=4,h["a"].customRequest(r);case 4:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 9:throw e.prev=9,e.t0=e["catch"](1),new S(e.t0.response.status,e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),requestJWT:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={method:"post",url:"auth/token",data:{grant_type:"token",token:t}},e.prev=1,e.next=4,h["a"].customRequest(r);case 4:return n=e.sent,E["a"].saveToken(n.data.access_token),E["a"].saveRefreshToken(n.data.refresh_token),h["a"].setHeader(),h["a"].mount401Interceptor(),e.abrupt("return",n.data);case 12:throw e.prev=12,e.t0=e["catch"](1),new S(e.t0.response.status,e.t0.response.data.error);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));function t(t){return e.apply(this,arguments)}return t}(),refreshToken:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={method:"post",url:"auth/refresh",data:{grant_type:"refresh"}},e.prev=1,h["a"].setRefreshHeader(),e.next=5,h["a"].customRequest(t);case 5:return r=e.sent,E["a"].saveToken(r.data.access_token),E["a"].saveRefreshToken(r.data.refresh_token),h["a"].setHeader(),e.abrupt("return",r.data);case 12:throw e.prev=12,e.t0=e["catch"](1),new S(e.t0.response.status,e.t0.response.data.error);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"post",url:"auth/logout",headers:{Authorization:"Bearer ".concat(E["a"].getRefreshToken())}},h["a"].setRefreshHeader(),e.next=5,h["a"].customRequest(t);case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](0),new S(e.t0.response.status,e.t0.response.data.error);case 10:return e.prev=10,h["a"].unmount401Interceptor(),h["a"].removeHeader(),E["a"].removeToken(),E["a"].removeRefreshToken(),e.finish(10);case 16:case"end":return e.stop()}}),e,null,[[0,7,10,16]])})));function t(){return e.apply(this,arguments)}return t}()},U=r("41cb"),A={authenticating:!1,accessToken:E["a"].getToken(),refreshToken:E["a"].getRefreshToken(),authenticationErrorCode:0,authenticationError:"",tokenRequestEmail:"",subject:"",roles:[]},H={loggedIn:function(e){return!!e.accessToken},subject:function(e){return e.subject},roles:function(e){return e.roles},hasRole:function(e){return function(t){return e.roles.includes(t)}},authenticationStatus:function(e){return e.tokenRequestEmail?"Token sent to "+e.tokenRequestEmail:""},authenticationErrorCode:function(e){return e.authenticationErrorCode},authenticationError:function(e){return e.authenticationError},authenticating:function(e){return e.authenticating},localTokenID:function(e){return L(e.refreshToken).id}},I=(x={},Object(o["a"])(x,k["b"],(function(e){var t=e.commit,r=e.state,n=e.dispatch;console.log("AUTH_INIT"),r.accessToken&&r.refreshToken&&(B(r.accessToken)?B(r.refreshToken)?n(k["d"]):n(k["f"]):t(k["g"],{access_token:r.accessToken,refresh_token:r.refreshToken}))})),Object(o["a"])(x,k["h"],function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,n(k["h"],r),e.prev=2,e.next=5,P.requestEmailToken(r);case 5:n(k["i"],r),e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](2),e.t0 instanceof S&&n(k["a"],{errorCode:e.t0.errorCode,errorMessage:e.t0.message}),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(o["a"])(x,k["c"],function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,n(k["c"]),e.prev=2,e.next=5,P.requestJWT(r);case 5:a=e.sent,n(k["g"],a),U["a"].push(U["a"].history.current.query.redirect||"/"),e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](2),e.t0 instanceof S&&n(k["a"],{errorCode:e.t0.errorCode,errorMessage:e.t0.message}),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,r){return e.apply(this,arguments)}}()),Object(o["a"])(x,k["d"],function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,console.log("dispatch AUTH_LOGOUT"),e.prev=2,B(E["a"].getRefreshToken())){e.next=6;break}return e.next=6,P.logout();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),e.t0 instanceof S&&r(k["e"],{errorCode:e.t0.errorCode,errorMessage:e.t0.message});case 11:return e.prev=11,r(k["d"]),U["a"].push("/"),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[2,8,11,15]])})));return function(t){return e.apply(this,arguments)}}()),Object(o["a"])(x,k["f"],(function(e){var t=e.commit,r=e.state;if(console.log("dispatch AUTH_REFRESH"),!r.refreshTokenPromise){var n=P.refreshToken();t("refreshTokenPromise",n),n.then((function(e){t("refreshTokenPromise",null),t(k["g"],e)}),(function(e){t("refreshTokenPromise",null),t(k["a"],{errorCode:e.errorCode,errorMessage:e.message})}))}return r.refreshTokenPromise})),x),D=(C={},Object(o["a"])(C,k["h"],(function(e){console.log("AUTH_TOKEN_REQUEST"),e.authenticating=!0,e.authenticationError="",e.authenticationErrorCode=0,e.tokenRequestEmail=""})),Object(o["a"])(C,k["i"],(function(e,t){console.log("AUTH_TOKEN_REQUEST_SUCCESS"),e.authenticating=!1,e.authenticationError="",e.authenticationErrorCode=0,e.tokenRequestEmail=t})),Object(o["a"])(C,k["c"],(function(e){console.log("AUTH_LOGIN_REQUEST"),e.authenticating=!0,e.authenticationError="",e.authenticationErrorCode=0,e.tokenRequestEmail=""})),Object(o["a"])(C,k["g"],(function(e,t){var r=t.access_token,n=t.refresh_token;console.log("AUTH_SUCCESS"),e.accessToken=r,e.refreshToken=n,e.authenticating=!1,e.authenticationError="";var a=L(r);e.subject=a.sub,e.roles=a.roles})),Object(o["a"])(C,k["a"],(function(e,t){var r=t.errorCode,n=t.errorMessage;console.log("AUTH_ERROR"),e.authenticating=!1,e.authenticationErrorCode=r,e.authenticationError=n})),Object(o["a"])(C,k["d"],(function(e){console.log("AUTH_LOGOUT"),e.authenticationErrorCode="",e.authenticationError="",e.accessToken="",e.refreshToken="",e.subject="",e.roles=[]})),Object(o["a"])(C,k["e"],(function(e,t){var r=t.errorCode,n=t.errorMessage;console.log("AUTH_LOGOUT_ERROR"),e.authenticating=!1,e.authenticationErrorCode=r,e.authenticationError=n})),Object(o["a"])(C,"refreshTokenPromise",(function(e,t){e.refreshTokenPromise=t})),C),q={namespaced:!1,state:A,getters:H,actions:I,mutations:D},L=function(e){if(!e)return{};var t=e.split("."),r=t[1].replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break}return JSON.parse(decodeURIComponent(atob(r)))},N=function(e){var t=L(e);if("undefined"===typeof t.exp)return null;var r=new Date(0);return r.setUTCSeconds(t.exp),r},B=function(e){var t=N(e);if(null===t)return!0;var r=new Date;return t.valueOf()<=r.valueOf()};n["a"].use(a["a"]);t["a"]=new a["a"].Store({modules:{user:j,auth:q},state:{},mutations:{},actions:{}})},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=r("bb71");r("da64");n["a"].use(a["a"],{theme:{primary:"#13232B",secondary:"#2B4851",accent:"#B0BEC5",error:"#D6473A",info:"#7799B8",success:"#4CAF50",warning:"#E57436"},customProperties:!0,iconfont:"md"});var o=r("7496"),c=r("8336"),i=r("549c"),s=r("ce7e6"),u=r("553a"),l=r("132d"),f=r("8860"),p=r("ba95"),h=r("40fe"),d=r("5d23"),m=r("f774"),g=r("9910"),b=r("e0c7"),v=r("71d9"),k=r("2a7f"),O=r("706c"),_=function(){var e=this,t=e._self._c;return t(o["a"],{attrs:{id:"inspire"}},[t(m["a"],{attrs:{fixed:"",right:"",clipped:"",app:"",stateless:""},model:{value:e.drawerRight,callback:function(t){e.drawerRight=t},expression:"drawerRight"}},[t(f["a"],{attrs:{dense:""}},[t(p["a"],{on:{click:function(t){t.stopPropagation(),e.right=!e.right}}},[t(h["a"],[t(l["a"],[e._v("exit_to_app")])],1),t(d["a"],[t(d["b"],[e._v("Open Temporary Drawer")])],1)],1)],1)],1),t(v["a"],{attrs:{dense:"",color:"primary",dark:"",fixed:"",app:""}},[e.loggedIn?t(O["a"],{attrs:{name:"menu"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}):e._e(),t(k["b"],[t("router-link",{attrs:{to:"/"}},[t(c["a"],{attrs:{flat:""}},[e._v("GoBase")])],1)],1),t(g["a"]),t(k["a"],[t("AuthMenu")],1),e.loggedIn?t(O["a"],{on:{click:function(t){t.stopPropagation(),e.drawerRight=!e.drawerRight}}}):e._e()],1),t(m["a"],{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(f["a"],{attrs:{dense:""}},[t(p["a"],{on:{click:function(t){t.stopPropagation(),e.left=!e.left}}},[t(h["a"],[t(l["a"],[e._v("exit_to_app")])],1),t(d["a"],[t(d["b"],[e._v("Open Temporary Drawer")])],1)],1)],1),e.hasRole("admin")?t(f["a"],{staticClass:"subheader"},[t(s["a"]),t(b["a"],[e._v("Admin Panel")]),t(p["a"],{attrs:{to:"/admin/accounts",name:"accounts"}},[t(h["a"],[t(l["a"],[e._v("security")])],1),t(d["a"],[t(d["b"],[e._v("Accounts")])],1)],1)],1):t(f["a"],[t(s["a"]),t(b["a"],[e._v("Menu")]),t(p["a"],{attrs:{to:"/login"}},[t(h["a"],[t(l["a"],[e._v("account_box")])],1),t(d["a"],[t(d["b"],[e._v("Login for Menu")])],1)],1)],1)],1),t(m["a"],{attrs:{temporary:"",fixed:""},model:{value:e.left,callback:function(t){e.left=t},expression:"left"}}),t(i["a"],[t("router-view")],1),t(m["a"],{attrs:{right:"",temporary:"",fixed:""},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}}),t(u["a"],{staticClass:"black--text pa-4",attrs:{app:""}},[t("span",[e._v("GoBase")]),t(g["a"]),t("span",[e._v("Â© 2019")])],1),t("confirm",{ref:"confirm"})],1)},w=[],y=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),j=r("e449"),E=function(){var e=this,t=e._self._c;return e.loggedIn?t(j["a"],{attrs:{dark:"",left:""}},[t(c["a"],{attrs:{slot:"activator",name:"menuAccount",flat:""},slot:"activator"},[t(l["a"],[e._v("account_box")]),t(l["a"],[e._v("more_vert")])],1),t(f["a"],[t(p["a"],{staticClass:"elevation-6"},[t(d["b"],{staticClass:"text-xs-center"},[e._v(e._s(e.subject))])],1),t(s["a"]),t(p["a"],[t(c["a"],{staticClass:"text-xs-center",attrs:{name:"account",to:"/account",block:"",light:""}},[t(l["a"],{attrs:{left:""}},[e._v("account_box")]),e._v("Account\n      ")],1)],1),t(s["a"]),t(p["a"],[t(c["a"],{staticClass:"text-xs-center warning",attrs:{name:"logout",block:""},on:{click:e.logout}},[t(l["a"],{attrs:{left:""}},[e._v("logout")]),e._v("Logout\n      ")],1)],1)],1)],1):t(c["a"],{attrs:{slot:"activator",name:"login",to:"/login",flat:""},slot:"activator"},[e._v("Login")])},T=[],R=r("2f62"),x=r("63e0");function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={name:"AuthMenu",computed:S({},Object(R["c"])(["loggedIn","subject"])),methods:S({},Object(R["b"])({logout:x["d"]}))},U=P,A=r("2877"),H=Object(A["a"])(U,E,T,!1,null,null,null),I=H.exports,D=r("b0af"),q=r("99d9"),L=r("169a"),N=function(){var e=this,t=e._self._c;return t(L["a"],{style:{zIndex:e.options.zIndex},attrs:{"max-width":e.options.width},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel.apply(null,arguments)}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(D["a"],[t(v["a"],{attrs:{dark:"",color:e.options.color,dense:"",flat:""}},[t(k["b"],{staticClass:"white--text"},[e._v(e._s(e.title))])],1),t(q["b"],{directives:[{name:"show",rawName:"v-show",value:!!e.message,expression:"!!message"}]},[e._v(e._s(e.message))]),t(q["a"],{staticClass:"pt-0"},[t(g["a"]),t(c["a"],{attrs:{color:"primary darken-1"},nativeOn:{click:function(t){return e.agree.apply(null,arguments)}}},[e._v("Yes")]),t(c["a"],{nativeOn:{click:function(t){return e.cancel.apply(null,arguments)}}},[e._v("Cancel")])],1)],1)],1)},B=[],M={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:290,zIndex:200}}},methods:{open:function(e,t,r){var n=this;return this.dialog=!0,this.title=e,this.message=t,this.options=Object.assign(this.options,r),new Promise((function(e,t){n.resolve=e,n.reject=t}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}},F=M,G=Object(A["a"])(F,N,B,!1,null,null,null),Q=G.exports;function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){Object(y["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $={components:{AuthMenu:I,confirm:Q},props:{source:String},data:function(){return{drawer:null,drawerRight:null,right:!1,left:!1}},computed:W({},Object(R["c"])(["loggedIn","subject","hasRole"])),mounted:function(){this.$root.$confirm=this.$refs.confirm.open}},z=$,K=Object(A["a"])(z,_,w,!1,null,null,null),V=K.exports,Y=r("41cb"),X=r("4360"),Z=r("9483");Object(Z["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ee=r("c5fa"),te=r("f6ed");n["a"].config.productionTip=!1,ee["a"].init("http://localhost:3000/"),te["a"].getToken()&&(ee["a"].setHeader(),ee["a"].mount401Interceptor()),n["a"].filter("formatDate",(function(e){var t=new Date(e);return t.toLocaleDateString("en",{year:"numeric",month:"short",day:"2-digit"})})),new n["a"]({router:Y["a"],store:X["a"],render:function(e){return e(V)}}).$mount("#app")},"5ef6":function(e,t,r){},"63e0":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"h",(function(){return a})),r.d(t,"i",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return s})),r.d(t,"a",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"e",(function(){return f})),r.d(t,"k",(function(){return p})),r.d(t,"l",(function(){return h})),r.d(t,"j",(function(){return d}));var n="AUTH_INIT",a="AUTH_TOKEN_REQUEST",o="AUTH_TOKEN_REQUEST_SUCCESS",c="AUTH_LOGIN_REQUEST",i="AUTH_REFRESH_REQUEST",s="AUTH_SUCCESS",u="AUTH_ERROR",l="AUTH_LOGOUT",f="AUTH_LOGOUT_ERROR",p="USER_REQUEST",h="USER_SUCCESS",d="USER_ERROR"},b9c1:function(e,t,r){"use strict";r("5ef6")},c5fa:function(e,t,r){"use strict";r("6762"),r("2fdb"),r("96cf");var n=r("3b8d"),a=r("bc3a"),o=r.n(a),c=r("f6ed"),i=r("4360"),s=r("63e0"),u={init:function(e){o.a.defaults.baseURL=e,o.a.defaults.headers.common={Accept:"application/json","Content-Type":"application/json"},i["a"].dispatch(s["b"])},setHeader:function(){o.a.defaults.headers.common["Authorization"]="Bearer ".concat(c["a"].getToken())},setRefreshHeader:function(){o.a.defaults.headers.common["Authorization"]="Bearer ".concat(c["a"].getRefreshToken())},removeHeader:function(){o.a.defaults.headers.common={}},get:function(e,t){return o.a.get(e,{params:t})},post:function(e,t){return o.a.post(e,t)},put:function(e,t){return o.a.put(e,t)},delete:function(e){return o.a.delete(e)},customRequest:function(e){return o()(e)},_401interceptor:null,mount401Interceptor:function(){var e=this;this._401interceptor=o.a.interceptors.response.use((function(e){return e}),function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(401!=r.request.status){t.next=15;break}if(!r.config.url.includes("/auth/refresh")&&!r.config.url.includes("/auth/logout")){t.next=6;break}throw i["a"].dispatch(s["d"]),r;case 6:return t.prev=6,t.next=9,i["a"].dispatch(s["f"]);case 9:return t.abrupt("return",e.customRequest({method:r.config.method,url:r.config.url,data:r.config.data}));case 12:throw t.prev=12,t.t0=t["catch"](6),r;case 15:throw r;case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}())},unmount401Interceptor:function(){o.a.interceptors.response.eject(this._401interceptor)}};t["a"]=u},f6ed:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n="access_token",a="refresh_token",o={getToken:function(){return localStorage.getItem(n)},saveToken:function(e){localStorage.setItem(n,e)},removeToken:function(){localStorage.removeItem(n)},getRefreshToken:function(){return localStorage.getItem(a)},saveRefreshToken:function(e){localStorage.setItem(a,e)},removeRefreshToken:function(){localStorage.removeItem(a)}}}});
//# sourceMappingURL=app.181458b3.js.map