(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b19810a0"],{"27a6":function(t,e,n){},"2e29":function(t,e,n){},"8c88":function(t,e,n){"use strict";n.r(e);var r=n("8336"),a=n("b0af"),c=n("99d9"),s=n("12b2"),i=n("ac7c"),o=n("a523"),u=n("8fea"),l=n("169a"),d=n("ce7e6"),p=n("4bd4"),h=n("132d"),f=n("2db4"),m=n("9910"),v=(n("94a7"),n("2e29"),n("5368")),g=n("c341"),b=n("0789"),w=n("490a"),k=n("80d2"),x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A={name:"v-switch",directives:{Touch:g["a"]},mixins:[v["a"]],props:{loading:{type:[Boolean,String],default:!1}},computed:{classes:function(){return{"v-input--selection-controls v-input--switch":!0}},switchData:function(){return this.setTextColor(this.loading?void 0:this.computedColor,{class:this.themeClasses})}},methods:{genDefaultSlot:function(){return[this.genSwitch(),this.genLabel()]},genSwitch:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",this.$attrs),this.genRipple(this.setTextColor(this.computedColor,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",x({staticClass:"v-input--switch__track"},this.switchData)),this.$createElement("div",x({staticClass:"v-input--switch__thumb"},this.switchData),[this.genProgress()])])},genProgress:function(){return this.$createElement(b["b"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(w["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft:function(){this.isActive&&this.onChange()},onSwipeRight:function(){this.isActive||this.onChange()},onKeydown:function(t){(t.keyCode===k["p"].left&&this.isActive||t.keyCode===k["p"].right&&!this.isActive)&&this.onChange()}}},O=n("2677"),y=n("71d9"),_=n("2a7f"),j=(n("6762"),n("2fdb"),n("7f7f"),function(){var t=this,e=t._self._c;return e(o["a"],[e(f["a"],{staticClass:"text-capitalize",attrs:{timeout:3e3,top:"",color:t.snackColor},model:{value:t.snack,callback:function(e){t.snack=e},expression:"snack"}},[t._v("\n    "+t._s(t.snackText)+"\n    "),e(r["a"],{attrs:{outline:""},on:{click:function(e){t.snack=!1}}},[e(h["a"],[t._v("close")])],1)],1),e(y["a"],{staticClass:"elevation-1",attrs:{flat:"",color:"white"}},[e(_["b"],[t._v("Accounts")]),e(d["a"],{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e(m["a"]),e(l["a"],{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r["a"],{staticClass:"mb-2",attrs:{slot:"activator",color:"primary",dark:""},slot:"activator"},[t._v("New Account")]),e(a["a"],[e(s["a"],[e("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),e(c["b"],[e(o["a"],{attrs:{"grid-list-md":""}},[e(p["a"],{ref:"accountForm",attrs:{wrap:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(O["a"],{attrs:{label:"Name",rules:t.nameRules},model:{value:t.editedAccount.name,callback:function(e){t.$set(t.editedAccount,"name",e)},expression:"editedAccount.name"}}),e(O["a"],{attrs:{label:"Email",rules:t.emailRules},model:{value:t.editedAccount.email,callback:function(e){t.$set(t.editedAccount,"email",e)},expression:"editedAccount.email"}}),e(A,{attrs:{label:"Active",color:"primary"},model:{value:t.editedAccount.active,callback:function(e){t.$set(t.editedAccount,"active",e)},expression:"editedAccount.active"}}),e(i["a"],{attrs:{multiple:"",label:"Admin",value:"admin",color:"primary"},model:{value:t.editedAccount.roles,callback:function(e){t.$set(t.editedAccount,"roles",e)},expression:"editedAccount.roles"}}),e(i["a"],{attrs:{multiple:"",label:"User",value:"user",color:"primary"},model:{value:t.editedAccount.roles,callback:function(e){t.$set(t.editedAccount,"roles",e)},expression:"editedAccount.roles"}})],1)],1)],1),e(c["a"],[e(m["a"]),e(r["a"],{on:{click:t.close}},[t._v("Cancel")]),e(r["a"],{attrs:{color:"primary",disabled:!t.valid},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1),e(u["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.accounts,pagination:t.pagination,"total-items":t.totalAccounts,loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(n){return[e("tr",[e("td",{staticClass:"columnIcon"},[e(h["a"],[t._v(t._s(n.item.active?"check_box":"check_box_outline_blank"))])],1),e("td",{staticClass:"columnIcon"},[n.item.roles.includes("admin")?e(h["a"],[t._v("security")]):t._e()],1),e("td",{on:{click:function(t){n.expanded=!n.expanded}}},[t._v(t._s(n.item.name))]),e("td",[t._v(t._s(n.item.email))]),e("td",[t._v(t._s(t._f("formatDate")(n.item.last_login)))]),e("td",{staticClass:"justify-center layout px-0"},[e(h["a"],{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editAccount(n.item)}}},[t._v("edit")]),e(h["a"],{attrs:{small:""},on:{click:function(e){return t.deleteAccount(n.item)}}},[t._v("delete")])],1)])]}},{key:"expand",fn:function(n){return[e(a["a"],{attrs:{flat:""}},[e(c["b"],[t._v("Created: "+t._s(t._f("formatDate")(n.item.created_at)))]),e(c["b"],[t._v("Last Login: "+t._s(t._f("formatDate")(n.item.last_login)))])],1)]}}])})],1)}),R=[],C=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),$=(n("96cf"),n("3b8d")),E=(n("2397"),n("b0b4")),S=n("d225"),P=n("4e2b"),D=n("308d"),T=n("6bb5"),I=n("f28b"),L=n("c5fa");function N(t){var e=B();return function(){var n,r=Object(T["a"])(t);if(e){var a=Object(T["a"])(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(D["a"])(this,n)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var F=function(t){Object(P["a"])(n,t);var e=N(n);function n(t,r,a){var c;return Object(S["a"])(this,n),c=e.call(this,r),c.name=c.constructor.name,c.errorCode=t,c.message=r,c.fields=a,c}return Object(E["a"])(n)}(Object(I["a"])(Error)),q={getAccounts:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L["a"].get("/admin/accounts",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new F(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),createAccount:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L["a"].post("/admin/accounts",e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new F(t.t0.response.status,t.t0.response.data.error,t.t0.response.data.errors);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),updateAccount:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L["a"].put("/admin/accounts/".concat(e.id),e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new F(t.t0.response.status,t.t0.response.data.error,t.t0.response.data.errors);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),deleteAccount:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L["a"].delete("/admin/accounts/".concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new F(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),updateToken:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L["a"].put("/api/account/token/".concat(e.id),e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new F(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),deleteToken:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L["a"].delete("/api/account/token/".concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:throw t.prev=7,t.t0=t["catch"](0),new F(t.t0.response.status,t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()};function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){Object(C["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={name:"admin-accounts",data:function(){var t=this;return{accounts:[],totalAccounts:0,loading:!0,pagination:{},headers:[{text:"Active",value:"active",sortable:!0},{text:"Admin",value:"admin",sortable:!1},{text:"Name",align:"left",value:"name"},{text:"Email",align:"left",value:"email"},{text:"Last Login",align:"left",value:"last_login"}],dialog:!1,editedIndex:-1,editedAccount:{name:"",email:"",roles:["user"],active:!0},valid:!0,defaultAccount:{name:"",email:"",roles:["user"],active:!0},errors:{},snack:!1,snackColor:"",snackText:"",nameRules:[function(t){return!!t||"Name is required"},function(t){return t&&t.length<=100||"Name must be less than 100 characters"},function(){return!t.errors.name||t.errors.name}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"},function(){return!t.errors.email||t.errors.email}]}},watch:{dialog:function(t){t||this.close()},pagination:{handler:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getAccounts();case 2:e=t.sent,this.accounts=e.accounts,this.totalAccounts=e.count;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deep:!0}},computed:{formTitle:function(){return-1===this.editedIndex?"New Account":"Edit Account"}},methods:{getAccounts:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,c,s,i,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,e=this.pagination,n=e.sortBy,r=e.descending,a=e.page,c=e.rowsPerPage,s={page:a,limit:-1===c?0:c,order:(n||"")+(r?" desc":"")},t.next=6,q.getAccounts(s);case 6:return i=t.sent,o=i.accounts,u=i.count,t.abrupt("return",{accounts:o,count:u});case 12:t.prev=12,t.t0=t["catch"](1),console.log("could not get accounts data",t.t0);case 15:return t.prev=15,this.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,12,15,18]])})));function e(){return t.apply(this,arguments)}return e}(),editAccount:function(t){this.editedIndex=this.accounts.indexOf(t),this.editedAccount=Object.assign({},t),this.dialog=!0},close:function(){var t=this;this.dialog=!1,setTimeout((function(){t.editedAccount=Object.assign({},t.defaultAccount),t.editedIndex=-1,t.$refs.accountForm.reset()}),250)},save:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.editedIndex>-1)){t.next=17;break}return t.prev=1,t.next=4,q.updateAccount(Object.assign({},this.editedAccount));case 4:e=t.sent,Object.assign(this.accounts[this.editedIndex],e),this.close(),this.snackSuccess("account updated"),t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](1),this.errors=J({},t.t0.fields),this.$refs.accountForm.validate(),this.snackError(t.t0.message);case 15:t.next=31;break;case 17:return t.prev=17,t.next=20,q.createAccount(Object.assign({},this.editedAccount));case 20:n=t.sent,this.accounts.push(n),this.close(),this.snackSuccess("account created"),t.next=31;break;case 26:t.prev=26,t.t1=t["catch"](17),this.errors=J({},t.t1.fields),this.$refs.accountForm.validate(),this.snackError(t.t1.message);case 31:case"end":return t.stop()}}),t,this,[[1,10],[17,26]])})));function e(){return t.apply(this,arguments)}return e}(),deleteAccount:function(){var t=Object($["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$root.$confirm("Delete","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=16;break}return t.prev=3,n=this.accounts.indexOf(e),r=this.accounts[n].id,t.next=8,q.deleteAccount(r);case 8:this.accounts=this.accounts.filter((function(t){return t.id!==r})),this.totalAccounts--,this.snackSuccess("account deleted"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),this.snackError("could not delete account");case 16:case"end":return t.stop()}}),t,this,[[3,13]])})));function e(e){return t.apply(this,arguments)}return e}(),snackSuccess:function(t){this.snack=!0,this.snackColor="success",this.snackText=t},snackError:function(t){this.snack=!0,this.snackColor="error",this.snackText=t}}},U=K,G=(n("fef9"),n("2877")),H=Object(G["a"])(U,j,R,!1,null,"2ec76393",null);e["default"]=H.exports},fef9:function(t,e,n){"use strict";n("27a6")}}]);
//# sourceMappingURL=chunk-b19810a0.0256d228.js.map